{"version":3,"sources":["webpack://itfarrier/./src/pages/index.tsx"],"names":["Redirector","props","window","defaultLanguage","languages","currentLanguage","getUserLangKey","localizedUrl","withPrefix","navigate","replace","render","PureComponent","site","useStaticQuery","siteMetadata","i18n"],"mappings":"wKASMA,E,YACJ,WAAYC,GAAwB,MAIlC,GAHA,cAAMA,IAAN,KAGsB,oBAAXC,OAAwB,KACzBC,EAA+BF,EAA/BE,gBAAiBC,EAAcH,EAAdG,UAEnBC,GAAkBC,oBAAeF,EAAWD,GAE5CI,GAAeC,gBAAW,IAAIH,EAAL,MAE/BI,cAASF,EAAc,CAAEG,SAAS,IAXF,S,+BAepCC,OAAA,WACE,OAAO,M,GAjBcC,iBA+CzB,UAtBkB,WAAM,IACdC,GAASC,oBAAc,cAAvBD,KAaR,OACE,SAACb,EAAD,CACEG,gBAAiBU,EAAKE,aAAaC,KAAKb,gBACxCC,UAAWS,EAAKE,aAAaC,KAAKZ","file":"component---src-pages-index-tsx-99c7463ca0d3aaf84017.js","sourcesContent":["import { FC, PureComponent } from 'react';\n\nimport { graphql, navigate, useStaticQuery, withPrefix } from 'gatsby';\nimport { getUserLangKey } from 'ptz-i18n';\n\nimport { Language } from 'cmpts/LanguageContext';\n\nexport type RedirectorProps = { defaultLanguage: Language; languages: Language[] };\n\nclass Redirector extends PureComponent<RedirectorProps> {\n  constructor(props: RedirectorProps) {\n    super(props);\n\n    // https://www.gatsbyjs.com/docs/debugging-html-builds/#how-to-check-if-window-is-defined\n    if (typeof window !== 'undefined') {\n      const { defaultLanguage, languages } = props;\n\n      const currentLanguage = getUserLangKey(languages, defaultLanguage);\n\n      const localizedUrl = withPrefix(`/${currentLanguage}/`);\n\n      navigate(localizedUrl, { replace: true });\n    }\n  }\n\n  render() {\n    return null;\n  }\n}\n\nexport type IndexQuery = {\n  site: { siteMetadata: { i18n: { defaultLanguage: Language; languages: Language[] } } };\n};\n\nconst Index: FC = () => {\n  const { site } = useStaticQuery<IndexQuery>(graphql`\n    query Index {\n      site {\n        siteMetadata {\n          i18n {\n            defaultLanguage\n            languages\n          }\n        }\n      }\n    }\n  `);\n\n  return (\n    <Redirector\n      defaultLanguage={site.siteMetadata.i18n.defaultLanguage}\n      languages={site.siteMetadata.i18n.languages}\n    />\n  );\n};\n\nexport default Index;\n"],"sourceRoot":""}